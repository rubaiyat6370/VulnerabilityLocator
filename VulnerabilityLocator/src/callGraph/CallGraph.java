package callGraph;


import java.io.File;
import java.io.FileNotFoundException;
import java.util.Arrays;
import java.util.Collection;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Scanner;
import java.util.Set;

/**
 *
 * Date 12/09/2017 8:02:31 PM
 * All rights reserved by Rubaiyat Jahan Mumu
 * 
 **/

public class CallGraph {

	public static void main(String[] args) {
		
		CallGraph cg  =  new CallGraph();
		String directory = "D:\\SPL3\\VulnerabilityLocator\\VulnerabilityLocator\\src\\Trace.log";
		cg.readLogFile(directory);
	}
	
	public void readLogFile(String directory) {
		File file = new File(directory);
		Scanner scanner = null;
		Set <String> set = new HashSet<String>();
		try {
			scanner = new Scanner(file);
			
			while(scanner.hasNextLine()) {
				String line = scanner.nextLine();
				String[] words = line.split(" ");
				List<String> list = Arrays.asList(words);
				
				String indexOne = list.get(1);
				
				if(list.size()==3 && (indexOne.equals("callee") || indexOne.equals("caller"))) {
					String s = list.get(2);
					set.add(s);
				
				}
			}
			System.out.println(set.size());
		} catch (FileNotFoundException e) {
			
			e.printStackTrace();
		}
		
	}

}
